# Video Prompt UI Layout Reference

## Advanced Flags Tab Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ Scenes    ğŸ´ Advanced Flags                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚ ğŸ’¡ Advanced Flags: Control video prompts and which control      â”‚
â”‚    inputs are used per scene during generation.                  â”‚
â”‚                                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ scene_name_001                                               â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ ğŸ¬ Video Prompt Settings:                                   â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ video_prompt_source: [auto â–¼]                               â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ video_prompt_key:    [                      ] (text input)  â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ Preview:                                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚ â”‚ (Using image prompt - will be resolved at generation)    â”‚â”‚ â”‚
â”‚ â”‚ â”‚                                                           â”‚â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ ğŸ´ Control Flags:                                           â”‚ â”‚
â”‚ â”‚ â˜ use_depth   â˜‘ use_mask   â˜ use_pose   â˜ use_canny       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ scene_name_002                                               â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ ğŸ¬ Video Prompt Settings:                                   â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ video_prompt_source: [prompt â–¼]                             â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ video_prompt_key:    [character_intro â–¼] (dropdown)         â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ Preview:                                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚ â”‚ A young woman with flowing auburn hair, wearing a blue   â”‚â”‚ â”‚
â”‚ â”‚ â”‚ dress, standing in a sunlit garden                       â”‚â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ ğŸ´ Control Flags:                                           â”‚ â”‚
â”‚ â”‚ â˜‘ use_depth   â˜ use_mask   â˜‘ use_pose   â˜ use_canny       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ scene_name_003                                               â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ ğŸ¬ Video Prompt Settings:                                   â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ video_prompt_source: [composition â–¼]                        â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ video_prompt_key:    [action_sequence â–¼] (dropdown)         â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ Preview:                                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚ â”‚ running through the forest, leaping over fallen logs,    â”‚â”‚ â”‚
â”‚ â”‚ â”‚ dramatic action scene, dynamic camera angle              â”‚â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ ğŸ´ Control Flags:                                           â”‚ â”‚
â”‚ â”‚ â˜‘ use_depth   â˜‘ use_mask   â˜‘ use_pose   â˜‘ use_canny       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ scene_name_004                                               â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ ğŸ¬ Video Prompt Settings:                                   â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ video_prompt_source: [custom â–¼]                             â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ custom_prompt:                                               â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚ â”‚ slow motion shot of character looking back over shoulder â”‚â”‚ â”‚
â”‚ â”‚ â”‚ as the sun sets, golden hour lighting, cinematic        â”‚â”‚ â”‚
â”‚ â”‚ â”‚                                                           â”‚â”‚ â”‚
â”‚ â”‚ â”‚                                                           â”‚â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ Preview:                                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚ â”‚ slow motion shot of character looking back over shoulder â”‚â”‚ â”‚
â”‚ â”‚ â”‚ as the sun sets, golden hour lighting, cinematic        â”‚â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ ğŸ´ Control Flags:                                           â”‚ â”‚
â”‚ â”‚ â˜ use_depth   â˜ use_mask   â˜ use_pose   â˜ use_canny       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚ ğŸ’¾ Save Changes                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Input Type Matrix

| video_prompt_source | video_prompt_key field | custom_prompt field | Preview shows |
|---------------------|------------------------|---------------------|---------------|
| `auto`              | text input (empty)     | hidden              | Image prompt or placeholder |
| `prompt`            | dropdown (prompt keys) | hidden              | Selected prompt value |
| `composition`       | dropdown (comp names)  | hidden              | Composed prompt (joined) |
| `custom`            | hidden                 | textarea (editable) | Custom prompt text |

## Interaction Flow

### Selecting a Prompt Source
```
1. User clicks video_prompt_source dropdown
2. Selects "prompt" option
3. Tab re-renders with dropdown for video_prompt_key
4. Dropdown populates with available prompt keys from scene's prompts.json
5. Preview updates to show selected prompt value
```

### Changing Prompt Key
```
1. User clicks video_prompt_key dropdown
2. Selects "character_intro" from available options
3. updateVideoPromptPreview() is called
4. Preview textarea updates with prompt text:
   "A young woman with flowing auburn hair..."
5. Change is saved to currentScenes[idx].video_prompt_key
```

### Entering Custom Prompt
```
1. User selects "custom" in video_prompt_source
2. Tab re-renders with custom_prompt textarea
3. User types custom text
4. As user types, preview updates in real-time (on input event)
5. Change is saved to currentScenes[idx].video_custom_prompt
```

### Saving Changes
```
1. User clicks "ğŸ’¾ Save Changes"
2. currentScenes array is sent to /fbtools/story/save
3. Backend validates and saves to story.json
4. Success message appears: "âœ“ Story saved successfully"
5. Message fades after 2 seconds
```

## Field Descriptions

### video_prompt_source
Determines how the video generation prompt is obtained:
- **auto** (default): Use the scene's image generation prompt
- **prompt**: Use a specific prompt from prompts.json
- **composition**: Use a composition (multiple prompts joined)
- **custom**: Use custom freeform text

### video_prompt_key
When source is "prompt" or "composition":
- Key name to lookup in the scene's prompts.json
- Dropdown populated with available keys
- Selection updates preview immediately

### video_custom_prompt
When source is "custom":
- Freeform text for video generation
- Supports multiline input
- Updates preview as user types

### Preview
- Always visible, readonly textarea
- Shows the actual prompt text that will be used
- Updates dynamically based on source and selection
- Provides immediate feedback to user

## Styling

- Uses ComfyUI CSS variables for consistent theming
- Monospace font for preview textarea (easier to read prompts)
- Responsive grid layout for labels and inputs
- Emoji icons (ğŸ¬, ğŸ´) for visual distinction
- Proper spacing and padding for readability
